(function(i,s){if(typeof define==="function"&&define.amd){define(["exports","jquery"],function(t,e){s(i.bootoast=t,e)})}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){s(exports,require("jquery"))}else{s(i.bootoast={},i.jQuery)}})(this,function(t,n){"use strict";if(!n){console.error("jQuery not found, your jQuery plugin will not work.");return false}var o="bootoast";function e(t){if(typeof t==="string"){t={message:t}}if(typeof t!=="object")return;this.settings=n.extend({},this.defaults,t);this.title=this.settings.title;this.content=this.settings.content||this.settings.text||this.settings.message;this.timeoutProgress=null;this.position=this.positionFor(this.settings.position).split("-");this.settings.icon=this.settings.icon||this.icons[this.settings.type];var e=o+"-container";this.containerSelector="."+e+"."+this.position.join(".");if(n("body > "+this.containerSelector).length===0){n("<div>",{class:e+" "+this.position.join(" ")}).appendTo("body")}this.title=this.htmlEncode(this.title);var i=this.title?'<div class="bootoast-alert-title bootoast-ellipsis" title='+this.title+">"+this.title+"</div>":"";var s='<div class="bootoast-alert-content">'+this.content+"</div>";this.$el=n('<div class="'+o+" alert alert-"+this.typeFor(this.settings.type)+'"><span class="glyphicon glyphicon-'+this.settings.icon+'"></span><div class="bootoast-alert-container">'+i+s+"</div></div>");this.init()}n.extend(e.prototype,{defaults:{title:'',message:"Bootoast!",type:"info",position:"top-center",icon:null,timeout:3,timeoutProgress:false,animationDuration:300,dismissible:true},icons:{warning:"exclamation-sign",success:"ok-sign",danger:"remove-sign",info:"info-sign"},types:["primary","secondary","info","success","warning","danger"],typeSinonym:{warn:"warning",error:"danger"},positions:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],positionSinonym:{bottom:"bottom-center",leftBottom:"bottom-left",rightBottom:"bottom-right",top:"top-center",rightTop:"top-right",leftTop:"top-left"},init:function(){this.$el[(this.position[0]==="bottom"?"append":"prepend")+"To"](this.containerSelector);var e=this;if(this.settings.dismissible===true){this.$el.addClass("alert-dismissible").prepend('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>').on("click","button.close",function(t){t.preventDefault();e.hide()})}this.$el.on("mousewheel DOMMouseScroll",this.addScrollHidden);this.$el.on("mouseleave",this.removeScrollHidden);var i=0;this.$el.on("touchstart",function(t){i=n(document).scrollTop();n("body").css({position:"fixed",top:"-"+i+"px",width:"100%"})});this.$el.on("touchend",function(t){n("body").css({position:"unset",top:"unset",width:"unset"});n(document).scrollTop(i);e.removeScrollHidden()});this.$el.animate({opacity:1},this.settings.animationDuration);this.settings.timeout=this.settings.timeout==="false"?false:parseInt(this.settings.timeout);if(this.settings.timeout){var t=parseInt(this.settings.timeout*1e3);this.hide(t)}},hide:function(t){var e=this;if(this.settings.timeoutProgress&&t&&t>0){this.setTimeoutProgress(this.settings.timeoutProgress);e.processBarTimerId=this.moveProgressbar(e.$el,t)}var i=setTimeout(function(){e.$el.animate({opacity:0},e.settings.animationDuration,function(){e.$el.remove()});e.removeScrollHidden()},t||0);this.$el.unbind("mouseenter").unbind("mouseleave");this.$el.hover(function(){clearTimeout(i);clearInterval(e.processBarTimerId)},function(){i=e.hide(t);e.removeScrollHidden()});return i},setTimeoutProgress:function(t){if(this.timeoutProgress!==null){this.timeoutProgress.remove()}var e={top:"prepend",bottom:"append",background:"prepend"};var i=n("<div>",{class:"progress",html:n("<div>",{class:"progress-bar progress-bar-striped active",style:"width:100%",role:"progressbar","aria-valuemin":0,"aria-valuenow":0,"aria-valuemax":100})});var s=e[t]||"append";var o=typeof e[t]==="string"?t:"background";this.timeoutProgress=i.addClass("progress-"+o)[s+"To"](this.$el);return this.timeoutProgress},typeFor:function(t){if(this.types[t]){return t}if(!t){return"default"}var e=this.typeSinonym[t];return e||t},positionFor:function(t){if(n.inArray(t,this.positions)>-1)return t;var e=n.camelCase(t);return this.positionSinonym[e]||"bottom-center"},moveProgressbar:function(t,e){var i=this;var s=100;var o=setInterval(function(){if(s<=0){clearInterval(o)}else{s--;t.find("div.progress-bar.progress-bar-striped.active").css("width",s+"%")}},e/100);return o},addScrollHidden:function(){n("body").addClass("scrollHidden")},removeScrollHidden:function(){n("body").removeClass("scrollHidden")},htmlEncode:function(t){var e="";if(t.length==0)return"";e=t.replace(/&/g,"&amp;");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");e=e.replace(/\s/g,"&nbsp;");e=e.replace(/\'/g,"&#39;");e=e.replace(/\"/g,"&quot;");e=e.replace(/\n/g,"<br>");return e},htmlDecode:function(t){var e="";if(t.length==0)return"";e=t.replace(/&amp;/g,"&");e=e.replace(/&lt;/g,"<");e=e.replace(/&gt;/g,">");e=e.replace(/&nbsp;/g," ");e=e.replace(/&#39;/g,"'");e=e.replace(/&quot;/g,'"');e=e.replace(/<br>/g,"\n");return e}});t.toast=function(t){return new e(t)}});